(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(56)},30:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){e.exports=a.p+"static/media/icon-low.4c0f8edd.svg"},41:function(e,t,a){e.exports=a.p+"static/media/icon-high.2191c1b5.svg"},42:function(e,t,a){},45:function(e,t,a){e.exports=a.p+"static/media/icon-search.87a42f03.svg"},46:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){e.exports=a.p+"static/media/icon-heart.f8c8fd29.svg"},55:function(e,t,a){e.exports=a.p+"static/media/favicon.59368f90.ico"},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),i=a.n(c),l=a(7),o=a(8),s=a(11),u=a(9),m=a(12),d=a(5),h=a(59),p=a(58),f=a(16),E=a.n(f),y=a(17),b=a.n(y);var _=function(e){var t=e.split("-"),a=t[0],n=t[1]-1,r=t[2];return new Date(a,n,r)};var v={getMultipleForecastsById:function(e){return Array.isArray(e)||(e=[e]),new Promise(function(t,a){fetch("".concat("https://api.openweathermap.org/data/2.5/","group?appid=").concat("7291930c0cdcf0db0603d6580777ccda","&units=metric&id=").concat(e.join(","))).then(function(e){return e.json()}).then(function(e){if(!e||!parseInt(e.cnt))return t(null);var a=e.list.map(function(e){return{city:e.name,country:e.sys.country,forecastList:[{date:new Date,high:e.main.temp_max,low:e.main.temp_min}],currentTemperature:Number(e.main.temp),currentConditionText:e.weather[0].description,currentThermalSensation:0,windSpeed:Number(e.wind.speed),humidity:Number(e.main.humidity)}});t(a)}).then(t).catch(a)})},getForecastByCityName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return new Promise(function(a,n){fetch("".concat("https://api.apixu.com/v1/forecast.json","?key=").concat("fe75c0c456d94398a0b120256191101","&days=").concat(t,"&q=").concat(e)).then(function(e){return e.json()}).then(function(e){if(!e||!e.location||!e.current)return a(null);var t={city:e.location.name,country:e.location.country,forecastList:e.forecast.forecastday.map(function(e){return{date:_(e.date),high:e.day.maxtemp_c,low:e.day.mintemp_c}}),currentTemperature:e.current.temp_c,currentConditionText:e.current.condition.text,currentThermalSensation:e.current.feelslike_c,windSpeed:e.current.wind_kph,humidity:e.current.humidity};a(t)}).catch(n)})}},w=(a(30),a(32),function(e){return r.a.createElement("div",{className:"error-message"},e.message)}),g=(a(34),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"Weather forecast"))}),N=a(57),C=a(1),k=(Object(C.shape)({city:C.string.isRequired,country:C.string.isRequired,forecastList:Object(C.arrayOf)(Object(C.shape)({date:Object(C.instanceOf)(Date).isRequired,high:C.number.isRequired,low:C.number.isRequired})).isRequired,currentTemperature:C.number.isRequired,currentConditionText:C.string.isRequired,currentThermalSensation:C.number.isRequired,windSpeed:C.number.isRequired,humidity:C.number.isRequired}),a(4)),j=a.n(k),O={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"};var S=function(e){return O[e.getDay()]||null},F=(a(38),a(40)),M=a(41),T=function(e){var t=e.forecast;t=t||{};var a=Boolean(t.city),n=a?t.forecastList[0]:null,c=a?t.forecastList.slice(1,6):null;return r.a.createElement("section",{className:"weather-card"},r.a.createElement(k.SkeletonTheme,{color:"#F1D5B2",highlightColor:"#FDB46D"},r.a.createElement(N.a,{to:"?",className:"weather-card__close",title:"Close"},"x"),r.a.createElement("div",{className:"weather-card__body"},r.a.createElement("div",{className:"weather-card__city app__skeleton"},a?r.a.createElement("span",null,t.city," - ",t.country):r.a.createElement(j.a,{width:250})),r.a.createElement("h2",{className:"weather-card__temperature"},a?"".concat(t.currentTemperature,"\xbaC"):r.a.createElement(j.a,null),"\xa0\xa0",r.a.createElement("span",{title:a?t.currentConditionText:""},a?t.currentConditionText:r.a.createElement(j.a,null))),r.a.createElement("table",{className:"weather-card__now"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"weather-card__now__first-column"},a?r.a.createElement("img",{src:F,width:"12",height:"12",alt:"Low"}):"",a?r.a.createElement("b",null,Math.round(n.low),"\xba"):r.a.createElement(j.a,{width:45}),"\xa0\xa0\xa0",a?r.a.createElement("img",{src:M,width:"12",height:"12",alt:"High"}):"",a?r.a.createElement("b",null,Math.round(n.high),"\xba"):r.a.createElement(j.a,{width:45})),r.a.createElement("td",null,a?r.a.createElement("span",null,"Sensation ",r.a.createElement("b",null,Math.round(t.currentThermalSensation),"\xbaC")):r.a.createElement(j.a,{width:140}))),r.a.createElement("tr",null,r.a.createElement("td",null,a?r.a.createElement("span",null,"Wind ",r.a.createElement("b",null,Math.round(t.windSpeed),"km/h")):r.a.createElement(j.a,{width:100})),r.a.createElement("td",null,a?r.a.createElement("span",null,"Humidity ",r.a.createElement("b",null,Math.round(t.humidity),"%")):r.a.createElement(j.a,{width:140})))))),r.a.createElement("table",{className:"weather-card__footer"},r.a.createElement("tbody",null,r.a.createElement("tr",null,a?c.map(function(e,t){return r.a.createElement("td",{className:"weather-card__weekday",key:t,"data-order":t},r.a.createElement("div",null,S(e.date)),r.a.createElement("div",{className:"weather-card__weekdays__temp"},Math.round(e.low),"\xba\xa0\xa0",Math.round(e.high),"\xba"))}):r.a.createElement("td",null,r.a.createElement(j.a,{height:42})))))))},x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={forecast:null,error:null},a.loadForecast=a.loadForecast.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadForecast()}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.state.forecast&&e.city===this.state.forecast.city,n=t.forecast===this.state.forecast;return!a||!n}},{key:"componentDidUpdate",value:function(e,t){e.city!==this.props.city&&this.loadForecast()}},{key:"loadForecast",value:function(){var e=this;this.setState({forecast:null,error:null});var t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({forecast:t,error:a})};v.getForecastByCityName(this.props.city).then(function(e){e?t(e):t(null,"City not found")}).catch(function(e){return t(null,"Error: could not load weather card data.\n(".concat(e.toString(),")"))})}},{key:"render",value:function(){return this.state.error?r.a.createElement(w,{message:this.state.error}):r.a.createElement(T,{forecast:this.state.forecast})}}]),t}(r.a.Component),R=(a(42),function(){var e="";function t(t){e=t.target.value}return r.a.createElement(p.a,{render:function(n){var c=n.history;return r.a.createElement("section",{className:"search-bar"},r.a.createElement("form",{className:"search-bar__form",onSubmit:function(t){return function(t,a){t.preventDefault(),e.length&&a.push({search:"?city=".concat(e)})}(t,c)}},r.a.createElement("input",{className:"search-bar__input",type:"search",placeholder:"Search a city",pattern:".*\\S.*",title:"Must contain at least one non-empty character.",required:!0,autoFocus:!0,defaultValue:e,onChange:t}),r.a.createElement("button",{className:"search-bar__submit",type:"submit",title:"Search"},r.a.createElement("img",{src:a(45),width:"22",height:"22",alt:"Search"}))))}})});var q=function(e){return{firstChunk:(e=Array.isArray(e)?e:[]).slice(0,e.length/2),secondChunk:e.slice(e.length/2)}},D=(a(46),a(48),a(50),function(e){var t=e.city;return r.a.createElement(N.a,{className:"capital__link",to:"?city=".concat(t)},t)}),B=function(e){var t=e.forecast;return r.a.createElement("tr",null,r.a.createElement("td",{className:"capitals-column__temperature"},t.forecastList[0].low,"\xba"),r.a.createElement("td",{className:"capitals-column__temperature"},t.forecastList[0].high,"\xba"),r.a.createElement("td",null,r.a.createElement(D,{city:t.city})))},L=function(e){var t=e.order,a=e.forecasts;return r.a.createElement("div",{className:"capitals__column-wrapper","data-order":t},r.a.createElement("table",{className:"capitals__table",border:"0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"capitals-column__temperature"},"Min"),r.a.createElement("th",{className:"capitals-column__temperature"},"Max"),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.map(function(e,t){return r.a.createElement(B,{key:t,forecast:e})}))))};L.defaultProps={order:1};var W=L,A=(a(52),function(){return r.a.createElement("div",{className:"author"},"Made with",r.a.createElement("img",{className:"author-heart",src:a(54),alt:"Heart",width:"16",height:"16"}),"by ",r.a.createElement("a",{className:"author-link",href:"https://blog.andersonmamede.com.br/"},"Anderson Mamede"))}),I=function(e){var t=e.forecasts,a=q(t),n=a.firstChunk,c=a.secondChunk;return r.a.createElement("footer",{className:"footer"},r.a.createElement("h3",{className:"footer__title"},"Capitals"),r.a.createElement("div",{className:"foooter__capitals"},r.a.createElement(W,{order:1,forecasts:n}),r.a.createElement(W,{order:2,forecasts:c})),r.a.createElement(A,null))},P=a(55),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={capitalsForecasts:null,capitalsError:null},a.loadCapitalsForecasts=a.loadCapitalsForecasts.bind(Object(d.a)(Object(d.a)(a))),a.handleRenderWeatherCardContainer=a.handleRenderWeatherCardContainer.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadCapitalsForecasts()}},{key:"loadCapitalsForecasts",value:function(){var e=this,t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({capitalsForecasts:t,capitalsError:a})},a=this.props.capitals.map(function(e){return e.id});v.getMultipleForecastsById(a).then(function(e){e?t(e):t(null,"Capitals forecasts not found")}).catch(function(e){return t(null,"Error: could not load capitals.\n(".concat(e.toString(),")"))})}},{key:"handleRenderWeatherCardContainer",value:function(){var e=E.a.parse(window.location.search).city;return e?(document.title="".concat(e," - Weather forecast"),window.scrollTo(0,0),r.a.createElement(x,{city:e})):null}},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(b.a,{url:P}),r.a.createElement("div",{className:"app__wrapper"},r.a.createElement(g,null),r.a.createElement("div",{className:"app__main"},r.a.createElement(p.a,{path:"/",render:this.handleRenderWeatherCardContainer}),r.a.createElement(R,null)),this.state.capitalsError&&r.a.createElement(w,{message:this.state.capitalsError}),this.state.capitalsForecasts&&r.a.createElement(I,{forecasts:this.state.capitalsForecasts}))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(H,{capitals:[{id:"3410315",name:"Bras\xedlia"},{id:"2759794",name:"Amsterdam"},{id:"2643743",name:"London"},{id:"2964574",name:"Dublin"},{id:"2950159",name:"Berlin"},{id:"1850147",name:"Tokyo"},{id:"2267057",name:"Lisbon"},{id:"6455259",name:"Paris"},{id:"2800866",name:"Brussels"},{id:"6359304",name:"Madrid"}]}),document.getElementById("root"))}},[[19,2,1]]]);
//# sourceMappingURL=main.3464d3a7.chunk.js.map